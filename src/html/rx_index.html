@@require(PLATFORM, VERSION)
<!DOCTYPE HTML>
<html>

<head>
	<title>Welcome to your ExpressLRS System</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="elrs.css" />
</head>

<body>
	<header class="mui-appbar mui--z1 mui--text-center elrs-header">
		@@include("logo-template.svg")
		<h1>Welcome to your <b>ExpressLRS</b><br /> update page<br />
		</h1>
		<p>From here you can update your <b>&quot;<span id="product_name"></span>&quot;</b> receiver</p>
		<p>
			<b>Firmware Rev. </b>@@{VERSION} <span id="reg_domain"></span>
		</p>
	</header>
	<br>
	<div class="mui-container-fluid">
		<div class="mui-panel mui-col-sm-10 mui-col-sm-offset-1">

			<ul class="mui-tabs__bar mui-tabs__bar--justified">
				<li class="mui--is-active"><a data-mui-toggle="tab" data-mui-controls="pane-justified-1">Update</a></li>
				<li><a data-mui-toggle="tab" data-mui-controls="pane-justified-2">Model Match</a></li>
				<li id="pwm_tab"><a data-mui-toggle="tab" data-mui-controls="pane-justified-3">PWM Output</a></li>
				<li><a data-mui-toggle="tab" data-mui-controls="pane-justified-4">Network</a></li>
			</ul>

			<div class="mui-tabs__pane mui--is-active" id="pane-justified-1">
				<h2>Firmware Update</h2>
				Choose a file to update module firmware. Select the correct .bin file for @@{PLATFORM} otherwise a bad flash may occur.
				If this happens you will need to recover via USB/Serial. You may also download the
				<a href="firmware.bin" title="Click to download firmware">currently running firmware</a>.
				<br><br>
				<form id='upload_form' method='POST' enctype='multipart/form-data'>
					<div class="group">
						<input id='firmware_file' type='file' name='update'>
						<input type='submit' value='Update' class="mui-btn mui-btn--primary">
					</div>
					<br/>
					<h3 id="status"></h3>
					<progress id="progressBar" value="0" max="100" style="width:100%;"></progress>
				</form>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-2">
				<h2>Model Match</h2>
				If you set the 'Model Match' below to a number other than 255, you can specify the 'Receiver' number in OpenTX/EdgeTX
				model setup page and turn on the 'Model Match' in the ELRS Lua script for that model. 'Model Match' is between 0 and 63 inclusive.
				<br><br>
				<form action='/modelmatch' id='modelmatch' method='POST'>
					<div class="group">
						<div class="mui-textfield">
							<input id='modelid' type='text' name='modelid'>
						</div>
						<input type='submit' value='Set Model Match' class="mui-btn mui-btn--primary">
					</div>
				</form>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-3">
				<h2>PWM Output</h2>
				Set PWM output mode and failsafe positions.
				<ul>
					<li><b>Output:</b> Receiver output pin</li>
					<li><b>Mode:</b> Output frequency or binary On/Off mode</li>
					<li><b>Input:</b> Input channel from the handset</li>
					<li><b>Invert:</b> Invert input channel position</li>
					<li><b>750us:</b> Use half pulse width (494-1006us) with center 750us instead of 988-2012us</li>
					<li><b>Failsafe:</b> Absolute position to set the servo on failsafe</li>
					<ul>
						<li>Does not use "Invert" flag</li>
						<li>Value will be halved if "750us" flag is set</li>
						<li>Will be converted to binary for "On/Off" mode (>1500us = HIGH)</li>
					</ul>
				</ul>
				<br><br>
				<form action="/pwm" id="pwm" method="POST">
				</form>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-4">
				<div id="apmode" style="display:none;">
					<div class="mui-panel">
						<h2>Join Network</h2>
						Here you can join a network and it will be saved as your &quot;home&quot; network.
						When you are in range of your &quot;home&quot; network and start WiFi update the TX Module will automatically connect.
						<br>
						<br>
						<form action="/sethome" id="sethome" method="POST" autocomplete="off" class="mui-form">
							<div class="autocomplete mui-textfield" style="position:relative;">
								<div id="loader" style="position:absolute;right:0;width: 28px;height: 28px;" class="loader"></div>
								<input id="network" type="text" name="network" placeholder="SSID"/>
								<label>Home WiFi SSID</label>
							</div>
							<div class="mui-textfield">
								<input size='64' id='password' name='password' type='text'/>
								<label>Home WiFi password</label>
							</div>
							<input type="submit" value="Join" class="mui-btn mui-btn--primary">
						</form>
					</div>
					<div class="mui-panel">
						<a id="connect" href="#">Connect to &quot;home&quot; network: <span id="homenet"></span></a>
					</div>
				</div>

				<div id="stamode" style="display:none;">
					<h2>Home Network: <span id="ssid"></span></h2>
					<br>
					Forget &quot;home&quot; network and start access point
					<br>
					<a id="forget" href="#" class="mui-btn mui-btn--primary">Forget</a>
					<br><br>
					Disconnect from &quot;home&quot; network start access point
					<br>
					<a id="access" href="#" class="mui-btn mui-btn--primary">Disconnect</a>
				</div>
			</div>
		</div>
	</div>
	@@include("footer-template.html")
</body>
<script src="mui.js"></script>
<script src="scan.js"></script>
</html>